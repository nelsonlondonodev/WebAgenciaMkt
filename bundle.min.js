(() => {
  // src/js/darkMode.js
  function initDarkMode() {
    const darkModeToggle = document.getElementById("darkModeToggle");
    if (darkModeToggle) {
      const themes = ["auto", "light", "dark"];
      let currentTheme = localStorage.getItem("theme") || "auto";
      const applyTheme = (theme) => {
        if (theme === "auto") {
          const prefersDark = window.matchMedia(
            "(prefers-color-scheme: dark)"
          ).matches;
          document.documentElement.classList.toggle("dark", prefersDark);
        } else {
          document.documentElement.classList.toggle("dark", theme === "dark");
        }
      };
      const updateIcon = (theme) => {
        const iconElement = darkModeToggle.querySelector("i");
        if (iconElement) {
          iconElement.classList.remove(
            "fa-sun",
            "fa-moon",
            "fa-circle-half-stroke"
          );
          if (theme === "light") {
            iconElement.classList.add("fa-sun");
          } else if (theme === "dark") {
            iconElement.classList.add("fa-moon");
          } else {
            iconElement.classList.add("fa-circle-half-stroke");
          }
        }
      };
      darkModeToggle.addEventListener("click", () => {
        const currentThemeIndex = themes.indexOf(currentTheme);
        const nextThemeIndex = (currentThemeIndex + 1) % themes.length;
        currentTheme = themes[nextThemeIndex];
        localStorage.setItem("theme", currentTheme);
        applyTheme(currentTheme);
        updateIcon(currentTheme);
      });
      window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change", () => {
        if (currentTheme === "auto") {
          applyTheme("auto");
        }
      });
      applyTheme(currentTheme);
      updateIcon(currentTheme);
    }
  }

  // src/js/smoothScroll.js
  function initSmoothScroll() {
    document.body.classList.add("fade-in");
    function handleSmoothScroll(href) {
      const targetElement = document.querySelector(href);
      if (targetElement) {
        const headerOffset = document.getElementById("mainHeader")?.offsetHeight || 80;
        const elementPosition = targetElement.getBoundingClientRect().top;
        const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
        window.scrollTo({
          top: offsetPosition,
          behavior: "smooth"
        });
      }
    }
    function handlePageTransition(href, isInternalLink) {
      document.body.classList.add("fade-out");
      setTimeout(() => {
        if (isInternalLink) {
          handleSmoothScroll(href);
          setTimeout(() => {
            document.body.classList.remove("fade-out");
          }, 50);
        } else {
          window.location.href = href;
        }
      }, 300);
    }
    document.querySelectorAll(
      'a:not([href^="tel:"]):not([href^="mailto:"]):not(.social-share-btn):not(.modal-contact-button):not([target="_blank"])'
    ).forEach((link) => {
      link.addEventListener("click", function(e) {
        const href = this.getAttribute("href");
        if (!href || href === "#") {
          return;
        }
        const isInternalAnchor = href.startsWith("#");
        const isSamePage = isInternalAnchor || href.split("#")[0] === window.location.pathname.split("/").pop() || href.split("#")[0] === "";
        if (this.hostname === window.location.hostname || href.startsWith("/")) {
          e.preventDefault();
          handlePageTransition(href, isInternalAnchor && isSamePage);
        }
      });
    });
  }

  // src/js/scrollAnimations.js
  function initScrollAnimations() {
    const animatedElements = document.querySelectorAll(".scroll-animate-initial");
    if (animatedElements.length > 0) {
      if (typeof IntersectionObserver !== "undefined") {
        const observer = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                entry.target.classList.add("is-visible");
                observer.unobserve(entry.target);
              }
            });
          },
          { threshold: 0.1 }
        );
        animatedElements.forEach((el, index) => {
          el.style.transitionDelay = `${30 * index}ms`;
          observer.observe(el);
        });
      }
    }
  }

  // src/js/nav.js
  function createNavOverlay() {
    const overlay = document.createElement("div");
    overlay.id = "nav-overlay";
    overlay.className = "fixed inset-0 bg-black/50 z-10 hidden";
    document.body.appendChild(overlay);
    return overlay;
  }
  function initMobileMenu() {
    const mobileMenuButton = document.getElementById("mobileMenuButton");
    const mobileMenu = document.getElementById("mobileMenu");
    const overlay = createNavOverlay();
    if (!mobileMenuButton || !mobileMenu) return;
    const icon = mobileMenuButton.querySelector("i");
    const closeMobileMenu = () => {
      mobileMenu.classList.add("hidden");
      overlay.classList.add("hidden");
      if (icon) {
        icon.classList.remove("fa-times");
        icon.classList.add("fa-bars");
      }
    };
    const openMobileMenu = () => {
      mobileMenu.classList.remove("hidden");
      overlay.classList.remove("hidden");
      if (icon) {
        icon.classList.remove("fa-bars");
        icon.classList.add("fa-times");
      }
    };
    const toggleMobileMenu = () => {
      if (mobileMenu.classList.contains("hidden")) {
        openMobileMenu();
      } else {
        closeMobileMenu();
      }
    };
    mobileMenuButton.addEventListener("click", (e) => {
      e.stopPropagation();
      toggleMobileMenu();
    });
    overlay.addEventListener("click", closeMobileMenu);
    mobileMenu.addEventListener("click", (e) => {
      const link = e.target.closest("a");
      if (!link) return;
      if (e.target.closest("#mobileServicesButton")) {
        return;
      }
      closeMobileMenu();
    });
  }
  function initMobileServicesMenu() {
    const mobileServicesButton = document.getElementById("mobileServicesButton");
    const mobileServicesMenu = document.getElementById("mobileServicesMenu");
    if (!mobileServicesButton || !mobileServicesMenu) return;
    mobileServicesButton.addEventListener("click", (e) => {
      e.stopPropagation();
      mobileServicesMenu.classList.toggle("hidden");
      const icon = mobileServicesButton.querySelector("i.fa-chevron-down");
      if (icon) {
        icon.classList.toggle("rotate-180");
      }
    });
  }
  function initScrollSpy() {
    const sections = document.querySelectorAll("section[id]");
    const navLinks = document.querySelectorAll("header nav a");
    if (sections.length === 0 || navLinks.length === 0) return;
    const observerOptions = {
      root: null,
      rootMargin: "0px 0px -60% 0px",
      threshold: 0
    };
    const sectionObserver = new IntersectionObserver((entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          const sectionId = entry.target.id;
          navLinks.forEach((link) => {
            link.classList.remove("nav-active");
            if (link.getAttribute("href") === `#${sectionId}`) {
              link.classList.add("nav-active");
            }
          });
        }
      });
    }, observerOptions);
    sections.forEach((section) => {
      sectionObserver.observe(section);
    });
  }
  function initDesktopServicesMenu() {
    const servicesMenuGroup = document.getElementById("services-menu-group");
    const servicesMenuDropdown = document.getElementById("services-menu-dropdown");
    let timeoutId;
    if (!servicesMenuGroup || !servicesMenuDropdown) return;
    servicesMenuGroup.addEventListener("mouseenter", () => {
      clearTimeout(timeoutId);
      servicesMenuDropdown.classList.remove("hidden");
    });
    servicesMenuGroup.addEventListener("mouseleave", () => {
      timeoutId = setTimeout(() => {
        servicesMenuDropdown.classList.add("hidden");
      }, 300);
    });
  }
  function initNav() {
    initMobileMenu();
    initMobileServicesMenu();
    initScrollSpy();
    initDesktopServicesMenu();
  }

  // src/js/portfolio.js
  function initPortfolio() {
    const filtersContainer = document.getElementById("portfolio-filters");
    const portfolioItems = document.querySelectorAll(
      "#portfolio-grid .portfolio-item"
    );
    if (filtersContainer && portfolioItems.length > 0) {
      filtersContainer.addEventListener("click", (e) => {
        if (e.target.matches("button.filter-btn")) {
          const clickedButton = e.target;
          if (clickedButton.classList.contains("active-filter")) {
            return;
          }
          filtersContainer.querySelector(".active-filter").classList.remove("active-filter");
          clickedButton.classList.add("active-filter");
          const filterValue = clickedButton.dataset.filter;
          portfolioItems.forEach((item) => {
            const itemCategories = item.dataset.category;
            const matchesFilter = filterValue === "all" || itemCategories.includes(filterValue);
            item.style.display = matchesFilter ? "block" : "none";
          });
        }
      });
    }
  }

  // src/js/numberAnimation.js
  function animateValue(element, start, end, duration, decimals = 0) {
    let startTime = null;
    function animation(currentTime) {
      if (startTime === null) startTime = currentTime;
      const elapsedTime = currentTime - startTime;
      const progress = Math.min(elapsedTime / duration, 1);
      const isCountingUp = start < end;
      const range = end - start;
      const currentValue = start + range * progress;
      if (progress === 1) {
        element.textContent = parseFloat(end).toFixed(decimals);
      } else {
        element.textContent = currentValue.toFixed(decimals);
      }
      if (progress < 1) {
        requestAnimationFrame(animation);
      }
    }
    requestAnimationFrame(animation);
  }
  function initNumberAnimation() {
    const numberElements = document.querySelectorAll(".animate-number");
    if (numberElements.length === 0) {
      return;
    }
    const observer = new IntersectionObserver(
      (entries, observer2) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            const element = entry.target;
            const end = parseFloat(element.dataset.endValue);
            const start = parseFloat(element.dataset.startValue) || 0;
            const duration = parseInt(element.dataset.duration, 10) || 2e3;
            const decimals = parseInt(element.dataset.decimals, 10) || 0;
            if (isNaN(end)) {
              console.error(
                "El atributo data-end-value no es un n\xFAmero v\xE1lido.",
                element
              );
              return;
            }
            animateValue(element, start, end, duration, decimals);
            observer2.unobserve(element);
          }
        });
      },
      { threshold: 0.5 }
      // Iniciar cuando el 50% del elemento sea visible
    );
    numberElements.forEach((element) => {
      observer.observe(element);
    });
  }

  // src/js/componentLoader.js
  var loadComponent = async (selector, url) => {
    try {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(
          `Error al cargar el componente ${url}: ${response.statusText}`
        );
      }
      const data = await response.text();
      const element = document.querySelector(selector);
      if (element) {
        element.innerHTML = data;
      } else {
        console.warn(`No se encontr\xF3 el elemento con el selector: ${selector}`);
      }
    } catch (error) {
      console.error(`No se pudo cargar el componente desde ${url}:`, error);
    }
  };
  var loadComponents = async () => {
    await loadComponent("#nav-placeholder", "/components/nav.html");
    await loadComponent("#footer-placeholder", "/components/footer.html");
    await loadComponent("#cookie-banner-placeholder", "/components/cookie-banner.html");
    await loadComponent('[data-component="chatbot"]', "/components/chatbot.html");
  };

  // src/js/footer.js
  var initFooter = () => {
    const yearSpan = document.getElementById("currentYear");
    if (yearSpan) {
      yearSpan.textContent = (/* @__PURE__ */ new Date()).getFullYear();
    }
  };

  // src/js/chatbot.js
  var Chatbot = class {
    constructor() {
      this.elements = {
        widgetButton: document.getElementById("chat-widget-button"),
        window: document.getElementById("chat-window"),
        closeButton: document.getElementById("close-chat-window"),
        sendButton: document.getElementById("chat-send"),
        input: document.getElementById("chat-input"),
        messages: document.getElementById("chat-messages")
      };
      if (!this.elements.widgetButton) {
        return;
      }
      this.n8nWebhookUrl = "https://n8n.srv1033442.hstgr.cloud/webhook/34b5ab96-ecf0-4195-93de-e3923c2062e5";
      this.sessionIdKey = "nelson_chat_session_id";
      this.sessionId = this.getOrCreateSessionId();
      this.historyKey = `nelson_chat_history_${this.sessionId}`;
      this.history = [];
      this.loadHistory();
      this.addEventListeners();
    }
    getOrCreateSessionId() {
      let sessionId = localStorage.getItem(this.sessionIdKey);
      if (!sessionId) {
        sessionId = Date.now().toString(36) + Math.random().toString(36).substring(2);
        localStorage.setItem(this.sessionIdKey, sessionId);
      }
      return sessionId;
    }
    loadHistory() {
      const storedHistory = sessionStorage.getItem(this.historyKey);
      if (storedHistory) {
        this.history = JSON.parse(storedHistory);
        this.history.forEach((item) => {
          this.appendMessage(item.message, item.sender, false);
        });
      }
    }
    addEventListeners() {
      this.elements.widgetButton.addEventListener("click", () => this.toggleWindow());
      this.elements.closeButton.addEventListener("click", () => this.toggleWindow());
      this.elements.sendButton.addEventListener("click", () => this.sendMessage());
      this.elements.input.addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
          this.sendMessage();
        }
      });
    }
    toggleWindow() {
      this.elements.window.classList.toggle("hidden");
      if (!this.elements.window.classList.contains("hidden")) {
        this.elements.input.focus();
        if (this.history.length === 0) {
          this.appendMessage(
            "\xA1Hola! Soy Aurelio, tu asistente virtual. \xBFEn qu\xE9 puedo ayudarte?",
            "bot"
          );
        }
      }
    }
    sendMessage() {
      const message = this.elements.input.value.trim();
      if (message === "") return;
      this.appendMessage(message, "user");
      this.elements.input.value = "";
      this.showTypingIndicator();
      this.sendToWebhook(message, this.sessionId);
    }
    async sendToWebhook(message, sessionId) {
      try {
        const response = await fetch(this.n8nWebhookUrl, {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({ message, sessionId })
        });
        const data = await response.json();
        this.removeTypingIndicator();
        const botResponse = data.response || "Lo siento, no he podido procesar tu mensaje. Por favor, intenta de nuevo.";
        this.appendMessage(botResponse, "bot");
      } catch (error) {
        console.error("Error sending message to n8n:", error);
        this.removeTypingIndicator();
        this.appendMessage(
          "Lo siento, ha ocurrido un error de conexi\xF3n. Por favor, int\xE9ntalo m\xE1s tarde.",
          "bot"
        );
      }
    }
    createBubble(message, sender) {
      const bubble = document.createElement("div");
      bubble.className = `py-2 px-4 inline-block max-w-xs ${sender === "user" ? "bg-primary-blue text-white rounded-t-lg rounded-bl-lg" : "bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white rounded-t-lg rounded-br-lg"}`;
      bubble.innerHTML = message;
      bubble.querySelectorAll("a").forEach((link) => link.classList.add("text-blue-500", "underline"));
      return bubble;
    }
    createTimestamp() {
      const time = (/* @__PURE__ */ new Date()).toLocaleTimeString("es-ES", {
        hour: "2-digit",
        minute: "2-digit"
      });
      const timeElement = document.createElement("div");
      timeElement.className = "text-xs text-gray-500 dark:text-gray-400 mt-1";
      timeElement.textContent = time;
      return timeElement;
    }
    appendMessage(message, sender, save = true) {
      if (save) {
        this.history.push({ message, sender });
        sessionStorage.setItem(this.historyKey, JSON.stringify(this.history));
      }
      const messageElement = document.createElement("div");
      messageElement.className = `mb-4 flex flex-col ${sender === "user" ? "items-end" : "items-start"} animate-chat-message-in`;
      const bubble = this.createBubble(message, sender);
      const timestamp = this.createTimestamp();
      messageElement.appendChild(bubble);
      messageElement.appendChild(timestamp);
      this.elements.messages.appendChild(messageElement);
      this.elements.messages.scrollTop = this.elements.messages.scrollHeight;
    }
    showTypingIndicator() {
      const typingIndicator = document.createElement("div");
      typingIndicator.id = "typing-indicator";
      typingIndicator.className = "mb-4";
      typingIndicator.innerHTML = `
      <div class="bg-gray-200 dark:bg-gray-700 rounded-lg py-2 px-4 inline-block">
        <div class="flex items-center space-x-1">
          <span class="w-2 h-2 bg-gray-500 rounded-full animate-pulse"></span>
          <span class="w-2 h-2 bg-gray-500 rounded-full animate-pulse" style="animation-delay: 0.2s;"></span>
          <span class="w-2 h-2 bg-gray-500 rounded-full animate-pulse" style="animation-delay: 0.4s;"></span>
        </div>
      </div>`;
      this.elements.messages.appendChild(typingIndicator);
      this.elements.messages.scrollTop = this.elements.messages.scrollHeight;
    }
    removeTypingIndicator() {
      const typingIndicator = document.getElementById("typing-indicator");
      if (typingIndicator) {
        typingIndicator.remove();
      }
    }
  };
  function initChatbot() {
    new Chatbot();
  }

  // src/js/script.js
  document.addEventListener("DOMContentLoaded", async () => {
    await loadComponents();
    initDarkMode();
    initSmoothScroll();
    initScrollAnimations();
    initNav();
    initPortfolio();
    initNumberAnimation();
    initFooter();
    initChatbot();
    initModals();
    function initModals() {
      function openModal(modal) {
        if (modal) {
          const iframe = modal.querySelector("iframe[data-src]");
          if (iframe && !iframe.src) {
            iframe.src = iframe.dataset.src;
          }
          modal.classList.remove("hidden");
          modal.classList.add("flex");
          document.body.classList.add("overflow-hidden");
        }
      }
      function closeModal(modal) {
        if (modal) {
          modal.classList.add("hidden");
          modal.classList.remove("flex");
          document.body.classList.remove("overflow-hidden");
        }
      }
      const modalConfigs = [
        { cardId: "card-proyecto-locutorio", modalId: "proyecto-modal-locutorio" },
        { cardId: "card-proyecto-barberia", modalId: "proyecto-modal-barberia" },
        { cardId: "card-proyecto-kuula", modalId: "proyecto-modal-kuula" }
      ];
      modalConfigs.forEach((config) => {
        const card = document.getElementById(config.cardId);
        const modal = document.getElementById(config.modalId);
        if (card && modal) {
          card.addEventListener("click", () => openModal(modal));
        }
      });
      const allModals = document.querySelectorAll(
        '[id^="service-modal-"], [id^="proyecto-modal-"]'
      );
      if (allModals.length > 0) {
        allModals.forEach((modal) => {
          const closeModalBtn = modal.querySelector('button[id^="close-modal-"]');
          if (closeModalBtn) {
            closeModalBtn.addEventListener("click", () => closeModal(modal));
          }
          modal.addEventListener("click", (event) => {
            if (event.target === modal) {
              closeModal(modal);
            }
          });
          modal.querySelectorAll(".modal-contact-button").forEach((button) => {
            button.addEventListener("click", () => closeModal(modal));
          });
        });
        window.addEventListener("keydown", (event) => {
          if (event.key === "Escape") {
            allModals.forEach((modal) => {
              if (!modal.classList.contains("hidden")) {
                closeModal(modal);
              }
            });
          }
        });
      }
    }
    initContactForm();
    function initContactForm() {
      const contactForm = document.querySelector("#contact-form");
      if (contactForm) {
        const statusMessage = document.getElementById("form-status");
        const submitButton = contactForm.querySelector('button[type="submit"]');
        contactForm.addEventListener("submit", async function(e) {
          e.preventDefault();
          if (!contactForm.checkValidity()) {
            contactForm.reportValidity();
            if (statusMessage) {
              statusMessage.textContent = "Por favor, completa todos los campos requeridos.";
              statusMessage.className = "text-center font-semibold mt-4 text-red-600";
              setTimeout(() => {
                statusMessage.textContent = "";
              }, 5e3);
            }
            return;
          }
          const formData = new FormData(contactForm);
          if (statusMessage) {
            statusMessage.textContent = "Enviando...";
            statusMessage.className = "text-center font-semibold mt-4 text-gray-600 dark:text-gray-300";
          }
          if (submitButton) {
            submitButton.disabled = true;
          }
          try {
            const response = await fetch(contactForm.action, {
              method: "POST",
              body: formData,
              headers: { Accept: "application/json" }
            });
            if (response.ok) {
              if (statusMessage) {
                statusMessage.textContent = "\xA1Mensaje enviado con \xE9xito!";
                statusMessage.className = "text-center font-semibold mt-4 text-green-600";
                setTimeout(() => {
                  statusMessage.textContent = "";
                }, 5e3);
              }
              contactForm.reset();
            } else {
              if (statusMessage) {
                statusMessage.textContent = "Hubo un error al enviar el mensaje. Int\xE9ntalo de nuevo.";
                statusMessage.className = "text-center font-semibold mt-4 text-red-600";
                setTimeout(() => {
                  statusMessage.textContent = "";
                }, 5e3);
              }
            }
          } catch (error) {
            if (statusMessage) {
              statusMessage.textContent = "Hubo un problema de conexi\xF3n. Revisa tu internet.";
              statusMessage.className = "text-center font-semibold mt-4 text-red-600";
              setTimeout(() => {
                statusMessage.textContent = "";
              }, 5e3);
            }
          } finally {
            if (submitButton) {
              setTimeout(() => {
                submitButton.disabled = false;
              }, 3e3);
            }
          }
        });
      }
    }
    initContactReveal();
    function initContactReveal() {
      const contactContainer = document.getElementById("contact-reveal-container");
      if (contactContainer) {
        const revealEmailBtn = document.getElementById("reveal-email-btn");
        const revealPhoneBtn = document.getElementById("reveal-phone-btn");
        if (revealEmailBtn) {
          revealEmailBtn.addEventListener(
            "click",
            (e) => {
              e.currentTarget.outerHTML = `
          <a href="mailto:contacto@nelsonlondono.es" class="text-primary-blue dark:text-primary-green font-semibold hover:underline flex items-center">
            <i class="fas fa-envelope mr-2"></i>contacto@nelsonlondono.es
          </a>`;
            },
            { once: true }
          );
        }
        if (revealPhoneBtn) {
          revealPhoneBtn.addEventListener(
            "click",
            (e) => {
              e.currentTarget.outerHTML = `
          <a href="tel:+34663975428" class="text-primary-blue dark:text-primary-green font-semibold hover:underline flex items-center">
            <i class="fas fa-phone mr-2"></i>+34 663 97 54 28
          </a>`;
            },
            { once: true }
          );
        }
      }
    }
    initCookieConsent();
    function initCookieConsent() {
      const COOKIE_CONSENT_KEY = "nelson_cookie_consent";
      const cookieBanner = document.getElementById("cookie-banner");
      const cookieModal = document.getElementById("cookie-settings-modal");
      const analyticsToggle = document.getElementById("analytics-cookie-toggle");
      const openCookieSettingsBtn = document.getElementById("open-cookie-settings");
      const acceptBtn = document.getElementById("cookie-accept");
      const rejectBtn = document.getElementById("cookie-reject");
      const settingsBtn = document.getElementById("cookie-settings-open");
      const saveSettingsBtn = document.getElementById("cookie-settings-save");
      function getConsent() {
        const consent = localStorage.getItem(COOKIE_CONSENT_KEY);
        return consent ? JSON.parse(consent) : null;
      }
      function setConsent(consent) {
        localStorage.setItem(COOKIE_CONSENT_KEY, JSON.stringify(consent));
      }
      function enableGoogleAnalytics() {
        if (typeof gtag === "function") {
          gtag("config", "G-124QEKRXHD");
        }
      }
      function handleInitialConsent() {
        const consent = getConsent();
        if (consent) {
          if (consent.analytics) {
            enableGoogleAnalytics();
          }
          if (cookieBanner) {
            cookieBanner.classList.add("hidden");
          }
        } else {
          if (cookieBanner) {
            cookieBanner.classList.remove("hidden");
          }
        }
      }
      if (openCookieSettingsBtn) {
        openCookieSettingsBtn.addEventListener("click", (e) => {
          e.preventDefault();
          const consent = getConsent() || { analytics: false };
          if (analyticsToggle) {
            analyticsToggle.checked = consent.analytics;
          }
          if (cookieModal) {
            cookieModal.classList.remove("hidden");
          }
        });
      }
      if (acceptBtn) {
        acceptBtn.addEventListener("click", () => {
          const consent = { necessary: true, analytics: true };
          setConsent(consent);
          enableGoogleAnalytics();
          if (cookieBanner) {
            cookieBanner.classList.add("hidden");
          }
        });
      }
      if (rejectBtn) {
        rejectBtn.addEventListener("click", () => {
          const consent = { necessary: true, analytics: false };
          setConsent(consent);
          if (cookieBanner) {
            cookieBanner.classList.add("hidden");
          }
        });
      }
      if (settingsBtn) {
        settingsBtn.addEventListener("click", () => {
          const consent = getConsent() || { analytics: false };
          if (analyticsToggle) {
            analyticsToggle.checked = consent.analytics;
          }
          if (cookieModal) {
            cookieModal.classList.remove("hidden");
          }
        });
      }
      if (saveSettingsBtn) {
        saveSettingsBtn.addEventListener("click", () => {
          const consent = {
            necessary: true,
            analytics: analyticsToggle ? analyticsToggle.checked : false
          };
          setConsent(consent);
          if (consent.analytics) {
            enableGoogleAnalytics();
          }
          if (cookieModal) {
            cookieModal.classList.add("hidden");
          }
          if (cookieBanner) {
            cookieBanner.classList.add("hidden");
          }
        });
      }
      if (cookieModal) {
        cookieModal.addEventListener("click", (e) => {
          if (e.target === cookieModal) {
            cookieModal.classList.add("hidden");
          }
        });
      }
      handleInitialConsent();
    }
    initHeroIframe();
    function initHeroIframe() {
      const heroIframeContainer = document.getElementById("hero-iframe-container");
      if (heroIframeContainer) {
        heroIframeContainer.addEventListener(
          "click",
          () => {
            const placeholder = document.getElementById("hero-iframe-placeholder");
            const iframe = document.getElementById("hero-iframe");
            if (iframe && iframe.dataset.src) {
              iframe.src = iframe.dataset.src;
              if (placeholder) {
                placeholder.classList.add("hidden");
              }
              iframe.classList.remove("hidden");
              heroIframeContainer.style.cursor = "default";
            }
          },
          { once: true }
        );
      }
    }
    function setupSocialSharing() {
      const shareLinkedin = document.getElementById("share-linkedin");
      const shareWhatsapp = document.getElementById("share-whatsapp");
      if (shareLinkedin && shareWhatsapp) {
        const shareUrl = window.location.href;
        const shareTitle = document.title;
        const shareText = document.querySelector('meta[name="description"]').getAttribute("content");
        if (shareUrl && shareTitle && shareText) {
          shareLinkedin.href = `https://www.linkedin.com/shareArticle?mini=true&url=${encodeURIComponent(
            shareUrl
          )}&title=${encodeURIComponent(shareTitle)}&summary=${encodeURIComponent(
            shareText
          )}`;
          shareLinkedin.target = "_blank";
          shareLinkedin.rel = "noopener noreferrer";
          shareWhatsapp.href = `https://api.whatsapp.com/send?text=${encodeURIComponent(
            shareTitle + " - Link: " + shareUrl
          )}`;
          shareWhatsapp.target = "_blank";
          shareWhatsapp.rel = "noopener noreferrer";
        }
      }
    }
    setupSocialSharing();
  });
})();
