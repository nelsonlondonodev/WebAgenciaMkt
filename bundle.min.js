(() => {
  // src/js/darkMode.js
  function initDarkMode() {
    const darkModeToggle = document.getElementById("darkModeToggle");
    if (darkModeToggle) {
      const themes = ["auto", "light", "dark"];
      let currentTheme = localStorage.getItem("theme") || "auto";
      const applyTheme = (theme) => {
        if (theme === "auto") {
          const prefersDark = window.matchMedia(
            "(prefers-color-scheme: dark)"
          ).matches;
          document.documentElement.classList.toggle("dark", prefersDark);
        } else {
          document.documentElement.classList.toggle("dark", theme === "dark");
        }
      };
      const updateIcon = (theme) => {
        const iconElement = darkModeToggle.querySelector("i");
        if (iconElement) {
          iconElement.classList.remove(
            "fa-sun",
            "fa-moon",
            "fa-circle-half-stroke"
          );
          if (theme === "light") {
            iconElement.classList.add("fa-sun");
          } else if (theme === "dark") {
            iconElement.classList.add("fa-moon");
          } else {
            iconElement.classList.add("fa-circle-half-stroke");
          }
        }
      };
      darkModeToggle.addEventListener("click", () => {
        const currentThemeIndex = themes.indexOf(currentTheme);
        const nextThemeIndex = (currentThemeIndex + 1) % themes.length;
        currentTheme = themes[nextThemeIndex];
        localStorage.setItem("theme", currentTheme);
        applyTheme(currentTheme);
        updateIcon(currentTheme);
      });
      window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change", () => {
        if (currentTheme === "auto") {
          applyTheme("auto");
        }
      });
      applyTheme(currentTheme);
      updateIcon(currentTheme);
    }
  }

  // src/js/smoothScroll.js
  function initSmoothScroll() {
    document.body.classList.add("fade-in");
    function handleSmoothScroll(href) {
      const targetElement = document.querySelector(href);
      if (targetElement) {
        const headerOffset = document.getElementById("mainHeader")?.offsetHeight || 80;
        const elementPosition = targetElement.getBoundingClientRect().top;
        const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
        window.scrollTo({
          top: offsetPosition,
          behavior: "smooth"
        });
      }
    }
    function handlePageTransition(href, isInternalLink) {
      document.body.classList.add("fade-out");
      setTimeout(() => {
        if (isInternalLink) {
          handleSmoothScroll(href);
          setTimeout(() => {
            document.body.classList.remove("fade-out");
          }, 50);
        } else {
          window.location.href = href;
        }
      }, 300);
    }
    document.querySelectorAll(
      'a:not([href^="tel:"]):not([href^="mailto:"]):not(.social-share-btn):not(.modal-contact-button):not([target="_blank"])'
    ).forEach((link) => {
      link.addEventListener("click", function(e) {
        const href = this.getAttribute("href");
        if (!href || href === "#") {
          return;
        }
        const isInternalAnchor = href.startsWith("#");
        const isSamePage = isInternalAnchor || href.split("#")[0] === window.location.pathname.split("/").pop() || href.split("#")[0] === "";
        if (this.hostname === window.location.hostname || href.startsWith("/")) {
          e.preventDefault();
          handlePageTransition(href, isInternalAnchor && isSamePage);
        }
      });
    });
  }

  // src/js/scrollAnimations.js
  var observer = typeof IntersectionObserver !== "undefined" ? new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add("is-visible");
          observer.unobserve(entry.target);
        }
      });
    },
    { threshold: 0.1 }
  ) : null;
  function observeAnimatedElements(elements) {
    if (!observer || !elements) return;
    const elementsToObserve = elements instanceof NodeList ? Array.from(elements) : [elements];
    elementsToObserve.forEach((el, index) => {
      if (el.classList.contains("scroll-animate-initial")) {
        el.style.transitionDelay = `${30 * index}ms`;
        observer.observe(el);
      }
    });
  }
  function initScrollAnimations() {
    const animatedElements = document.querySelectorAll(".scroll-animate-initial");
    if (animatedElements.length > 0) {
      observeAnimatedElements(animatedElements);
    }
  }

  // src/js/nav.js
  function createNavOverlay() {
    const overlay = document.createElement("div");
    overlay.id = "nav-overlay";
    overlay.className = "fixed inset-0 bg-black/50 z-10 hidden";
    document.body.appendChild(overlay);
    return overlay;
  }
  function initMobileMenu() {
    const mobileMenuButton = document.getElementById("mobileMenuButton");
    const mobileMenu = document.getElementById("mobileMenu");
    const overlay = createNavOverlay();
    if (!mobileMenuButton || !mobileMenu) return;
    const closeMobileMenu = () => {
      mobileMenu.classList.add("hidden");
      overlay.classList.add("hidden");
      mobileMenuButton.classList.remove("is-active");
    };
    const openMobileMenu = () => {
      mobileMenu.classList.remove("hidden");
      overlay.classList.remove("hidden");
      mobileMenuButton.classList.add("is-active");
    };
    const toggleMobileMenu = () => {
      if (mobileMenu.classList.contains("hidden")) {
        openMobileMenu();
      } else {
        closeMobileMenu();
      }
    };
    mobileMenuButton.addEventListener("click", (e) => {
      e.stopPropagation();
      toggleMobileMenu();
    });
    overlay.addEventListener("click", closeMobileMenu);
    mobileMenu.addEventListener("click", (e) => {
      const link = e.target.closest("a");
      if (!link) return;
      if (e.target.closest("#mobileServicesButton")) {
        return;
      }
      closeMobileMenu();
    });
  }
  function initMobileServicesMenu() {
    const mobileServicesButton = document.getElementById("mobileServicesButton");
    const mobileServicesMenu = document.getElementById("mobileServicesMenu");
    if (!mobileServicesButton || !mobileServicesMenu) return;
    mobileServicesButton.addEventListener("click", (e) => {
      e.stopPropagation();
      mobileServicesMenu.classList.toggle("hidden");
      const icon = mobileServicesButton.querySelector("i.fa-chevron-down");
      if (icon) {
        icon.classList.toggle("rotate-180");
      }
    });
  }
  function initScrollSpy() {
    const sections = document.querySelectorAll("section[id]");
    const navLinks = document.querySelectorAll("header nav a");
    if (sections.length === 0 || navLinks.length === 0) return;
    const observerOptions = {
      root: null,
      rootMargin: "0px 0px -60% 0px",
      threshold: 0
    };
    const sectionObserver = new IntersectionObserver((entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          const sectionId = entry.target.id;
          navLinks.forEach((link) => {
            link.classList.remove("nav-active");
            if (link.getAttribute("href") === `#${sectionId}`) {
              link.classList.add("nav-active");
            }
          });
        }
      });
    }, observerOptions);
    sections.forEach((section) => {
      sectionObserver.observe(section);
    });
  }
  function initDesktopServicesMenu() {
    const servicesMenuGroup = document.getElementById("services-menu-group");
    const servicesMenuDropdown = document.getElementById("services-menu-dropdown");
    let timeoutId;
    if (!servicesMenuGroup || !servicesMenuDropdown) return;
    servicesMenuGroup.addEventListener("mouseenter", () => {
      clearTimeout(timeoutId);
      servicesMenuDropdown.classList.remove("hidden");
    });
    servicesMenuGroup.addEventListener("mouseleave", () => {
      timeoutId = setTimeout(() => {
        servicesMenuDropdown.classList.add("hidden");
      }, 300);
    });
  }
  function initNav() {
    initMobileMenu();
    initMobileServicesMenu();
    initScrollSpy();
    initDesktopServicesMenu();
  }

  // src/js/portfolio.js
  function initPortfolioFilter() {
    const filtersContainer = document.getElementById("portfolio-filters");
    const portfolioGrid = document.getElementById("portfolio-grid");
    if (!filtersContainer || !portfolioGrid) return;
    const portfolioItems = portfolioGrid.querySelectorAll(".portfolio-item");
    if (portfolioItems.length === 0) return;
    filtersContainer.addEventListener("click", (e) => {
      const clickedButton = e.target.closest("button.filter-btn");
      if (!clickedButton) return;
      if (clickedButton.classList.contains("active-filter")) {
        return;
      }
      const currentActive = filtersContainer.querySelector(".active-filter");
      if (currentActive) {
        currentActive.classList.remove("active-filter");
      }
      clickedButton.classList.add("active-filter");
      const filterValue = clickedButton.dataset.filter;
      portfolioItems.forEach((item) => {
        const itemCategories = item.dataset.category || "";
        const matchesFilter = filterValue === "all" || itemCategories.includes(filterValue);
        if (matchesFilter) {
          item.classList.remove("hidden");
        } else {
          item.classList.add("hidden");
        }
      });
    });
  }

  // src/js/numberAnimation.js
  function animateValue(element, start, end, duration, decimals = 0) {
    let startTime = null;
    function animation(currentTime) {
      if (startTime === null) startTime = currentTime;
      const elapsedTime = currentTime - startTime;
      const progress = Math.min(elapsedTime / duration, 1);
      const isCountingUp = start < end;
      const range = end - start;
      const currentValue = start + range * progress;
      if (progress === 1) {
        element.textContent = parseFloat(end).toFixed(decimals);
      } else {
        element.textContent = currentValue.toFixed(decimals);
      }
      if (progress < 1) {
        requestAnimationFrame(animation);
      }
    }
    requestAnimationFrame(animation);
  }
  function initNumberAnimation() {
    const numberElements = document.querySelectorAll(".animate-number");
    if (numberElements.length === 0) {
      return;
    }
    const observer2 = new IntersectionObserver(
      (entries, observer3) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            const element = entry.target;
            const end = parseFloat(element.dataset.endValue);
            const start = parseFloat(element.dataset.startValue) || 0;
            const duration = parseInt(element.dataset.duration, 10) || 2e3;
            const decimals = parseInt(element.dataset.decimals, 10) || 0;
            if (isNaN(end)) {
              console.error(
                "El atributo data-end-value no es un n\xFAmero v\xE1lido.",
                element
              );
              return;
            }
            animateValue(element, start, end, duration, decimals);
            observer3.unobserve(element);
          }
        });
      },
      { threshold: 0.5 }
      // Iniciar cuando el 50% del elemento sea visible
    );
    numberElements.forEach((element) => {
      observer2.observe(element);
    });
  }

  // src/js/componentLoader.js
  var loadComponent = async (selector, url) => {
    try {
      const response = await fetch(url);
      if (!response.ok) {
        throw new Error(
          `Error al cargar el componente ${url}: ${response.statusText}`
        );
      }
      const data = await response.text();
      const element = document.querySelector(selector);
      if (element) {
        element.innerHTML = data;
      } else {
        console.warn(`No se encontr\xF3 el elemento con el selector: ${selector}`);
      }
    } catch (error) {
      console.error(`No se pudo cargar el componente desde ${url}:`, error);
    }
  };
  var loadComponents = async () => {
    await Promise.all([
      loadComponent("#nav-placeholder", "/components/nav.html"),
      loadComponent("#footer-placeholder", "/components/footer.html"),
      loadComponent("#cookie-banner-placeholder", "/components/cookie-banner.html")
    ]);
    if (document.querySelector('[data-component="chatbot"]')) {
      await loadComponent('[data-component="chatbot"]', "/components/chatbot.html");
    }
  };

  // src/js/footer.js
  var initFooter = () => {
    const yearSpan = document.getElementById("currentYear");
    if (yearSpan) {
      yearSpan.textContent = (/* @__PURE__ */ new Date()).getFullYear();
    }
  };

  // src/js/chatbot.js
  var Chatbot = class {
    constructor() {
      this.elements = {
        widgetButton: document.getElementById("chat-widget-button"),
        window: document.getElementById("chat-window"),
        closeButton: document.getElementById("close-chat-window"),
        sendButton: document.getElementById("chat-send"),
        input: document.getElementById("chat-input"),
        messages: document.getElementById("chat-messages")
      };
      if (!this.elements.widgetButton) {
        return;
      }
      this.n8nWebhookUrl = "https://n8n.srv1033442.hstgr.cloud/webhook/34b5ab96-ecf0-4195-93de-e3923c2062e5";
      this.sessionIdKey = "nelson_chat_session_id";
      this.sessionId = this.getOrCreateSessionId();
      this.historyKey = `nelson_chat_history_${this.sessionId}`;
      this.history = [];
      this.loadHistory();
      this.addEventListeners();
    }
    getOrCreateSessionId() {
      let sessionId = localStorage.getItem(this.sessionIdKey);
      if (!sessionId) {
        sessionId = Date.now().toString(36) + Math.random().toString(36).substring(2);
        localStorage.setItem(this.sessionIdKey, sessionId);
      }
      return sessionId;
    }
    loadHistory() {
      const storedHistory = sessionStorage.getItem(this.historyKey);
      if (storedHistory) {
        this.history = JSON.parse(storedHistory);
        this.history.forEach((item) => {
          this.appendMessage(item.message, item.sender, false);
        });
      }
    }
    addEventListeners() {
      this.elements.widgetButton.addEventListener("click", () => this.toggleWindow());
      this.elements.closeButton.addEventListener("click", () => this.toggleWindow());
      this.elements.sendButton.addEventListener("click", () => this.sendMessage());
      this.elements.input.addEventListener("keypress", (e) => {
        if (e.key === "Enter") {
          this.sendMessage();
        }
      });
    }
    toggleWindow() {
      this.elements.window.classList.toggle("hidden");
      if (!this.elements.window.classList.contains("hidden")) {
        this.elements.input.focus();
        if (this.history.length === 0) {
          this.appendMessage(
            "\xA1Hola! Soy Aurelio, tu asistente virtual. \xBFEn qu\xE9 puedo ayudarte?",
            "bot"
          );
        }
      }
    }
    sendMessage() {
      const message = this.elements.input.value.trim();
      if (message === "") return;
      this.appendMessage(message, "user");
      this.elements.input.value = "";
      this.showTypingIndicator();
      this.sendToWebhook(message, this.sessionId);
    }
    async sendToWebhook(message, sessionId) {
      try {
        const response = await fetch(this.n8nWebhookUrl, {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({ message, sessionId })
        });
        const data = await response.json();
        this.removeTypingIndicator();
        const botResponse = data.response || "Lo siento, no he podido procesar tu mensaje. Por favor, intenta de nuevo.";
        this.appendMessage(botResponse, "bot");
      } catch (error) {
        console.error("Error sending message to n8n:", error);
        this.removeTypingIndicator();
        this.appendMessage(
          "Lo siento, ha ocurrido un error de conexi\xF3n. Por favor, int\xE9ntalo m\xE1s tarde.",
          "bot"
        );
      }
    }
    createBubble(message, sender) {
      const bubble = document.createElement("div");
      bubble.className = `py-2 px-4 inline-block max-w-xs ${sender === "user" ? "bg-primary-blue text-white rounded-t-lg rounded-bl-lg" : "bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-white rounded-t-lg rounded-br-lg"}`;
      bubble.innerHTML = message;
      bubble.querySelectorAll("a").forEach((link) => link.classList.add("text-blue-500", "underline"));
      return bubble;
    }
    createTimestamp() {
      const time = (/* @__PURE__ */ new Date()).toLocaleTimeString("es-ES", {
        hour: "2-digit",
        minute: "2-digit"
      });
      const timeElement = document.createElement("div");
      timeElement.className = "text-xs text-gray-500 dark:text-gray-400 mt-1";
      timeElement.textContent = time;
      return timeElement;
    }
    appendMessage(message, sender, save = true) {
      if (save) {
        this.history.push({ message, sender });
        sessionStorage.setItem(this.historyKey, JSON.stringify(this.history));
      }
      const messageElement = document.createElement("div");
      messageElement.className = `mb-4 flex flex-col ${sender === "user" ? "items-end" : "items-start"} animate-chat-message-in`;
      const bubble = this.createBubble(message, sender);
      const timestamp = this.createTimestamp();
      messageElement.appendChild(bubble);
      messageElement.appendChild(timestamp);
      this.elements.messages.appendChild(messageElement);
      this.elements.messages.scrollTop = this.elements.messages.scrollHeight;
    }
    showTypingIndicator() {
      const typingIndicator = document.createElement("div");
      typingIndicator.id = "typing-indicator";
      typingIndicator.className = "mb-4";
      typingIndicator.innerHTML = `
      <div class="bg-gray-200 dark:bg-gray-700 rounded-lg py-2 px-4 inline-block">
        <div class="flex items-center space-x-1">
          <span class="w-2 h-2 bg-gray-500 rounded-full animate-pulse"></span>
          <span class="w-2 h-2 bg-gray-500 rounded-full animate-pulse" style="animation-delay: 0.2s;"></span>
          <span class="w-2 h-2 bg-gray-500 rounded-full animate-pulse" style="animation-delay: 0.4s;"></span>
        </div>
      </div>`;
      this.elements.messages.appendChild(typingIndicator);
      this.elements.messages.scrollTop = this.elements.messages.scrollHeight;
    }
    removeTypingIndicator() {
      const typingIndicator = document.getElementById("typing-indicator");
      if (typingIndicator) {
        typingIndicator.remove();
      }
    }
  };
  function initChatbot() {
    new Chatbot();
  }

  // src/js/data/services.js
  var servicesData = [
    {
      url: "agencia-desarrollo-web-con-codigo.html",
      icon: "fas fa-code fa-2x",
      title: "Desarrollo web a medida",
      description: "Creamos soluciones web \xFAnicas y de alto rendimiento, dise\xF1adas espec\xEDficamente para tus necesidades y objetivos de negocio."
    },
    {
      url: "agencia-automatizaciones.html",
      icon: "fas fa-robot fa-2x",
      title: "Agentes virtuales y automatizaciones",
      description: "Implementamos IA y automatizaciones para optimizar tus operaciones, reducir costos y escalar el crecimiento de tu negocio."
    },
    {
      url: "agencia-seo.html",
      icon: "fas fa-search fa-2x",
      title: "SEO (optimizaci\xF3n para buscadores)",
      description: "Mejora la visibilidad de tu sitio web en los resultados de b\xFAsqueda org\xE1nica de Google y otros buscadores."
    },
    {
      url: "agencia-seo-local.html",
      icon: "fas fa-map-marker-alt fa-2x",
      title: "SEO local",
      description: "Atrae clientes cercanos a tu negocio f\xEDsico. Optimiza tu presencia en Google Maps y b\xFAsquedas locales."
    }
  ];

  // src/js/serviceRenderer.js
  function createServiceCard(service) {
    return `
    <a
      href="${service.url}"
      class="service-card group hover:-translate-y-2 scroll-animate-initial cursor-pointer flex flex-col"
    >
      <div
        class="flex items-center justify-center w-16 h-16 mb-6 rounded-full bg-primary-green/20 dark:bg-primary-blue/20 text-glow-green dark:text-glow-blue group-hover:bg-primary-green dark:group-hover:bg-primary-blue group-hover:text-white transition-colors duration-300"
      >
        <i class="${service.icon}"></i>
      </div>
      <h3
        class="text-2xl md:text-3xl font-semibold mb-3 text-gray-900 dark:text-white"
      >
        ${service.title}
      </h3>
      <div
        class="text-base text-gray-600 dark:text-gray-400 mb-4 flex-grow"
      >
        <p class="mb-4">
          ${service.description}
        </p>
      </div>
    </a>
  `;
  }
  function initServiceCards() {
    const container = document.getElementById("services-container");
    if (!container) return;
    const cardsHtml = servicesData.map(createServiceCard).join("");
    container.innerHTML = cardsHtml;
    const newCards = container.querySelectorAll(".scroll-animate-initial");
    observeAnimatedElements(newCards);
  }

  // src/js/data/portfolio.js
  var portfolioData = [
    {
      id: "narbos",
      category: "web seo",
      url: "https://narbossalon.com/",
      imgSrc: "image/screen-narbos.webp",
      imgAlt: "P\xE1gina web de Narbo's Sal\xF3n Spa",
      title: "Narbo's Sal\xF3n Spa",
      isNew: true,
      tags: "Landing Page y SEO Local",
      description: "Desarrollo de landing page a medida y estrategia de SEO local para una peluquer\xEDa en Colombia, con el objetivo de aumentar su visibilidad y atraer clientes en su \xE1rea.",
      type: "link"
      // 'link' o 'modal'
    },
    {
      id: "locutorio",
      category: "tour seo",
      imgSrcSet: {
        "480w": "./image/foto-locutorio-480.webp",
        "800w": "./image/foto-locutorio-800.webp",
        "1440w": "./image/foto-locutorio.webp"
      },
      imgSrc: "./image/foto-locutorio.webp",
      imgAlt: "Tour 360 de Locutorio el Pil\xF3n",
      title: "Locutorio el Pil\xF3n",
      tags: "Tour virtual 360\xBA y SEO local",
      description: "Optimizaci\xF3n de ficha Google Business y creaci\xF3n de un tour virtual para aumentar la visibilidad y atraer nuevos clientes en Fuente el Saz.",
      type: "modal",
      modalId: "card-proyecto-locutorio",
      // Este ID es para el modal
      tourType: "360\xB0 Tour"
    },
    {
      id: "barberia",
      category: "tour seo",
      imgSrcSet: {
        "480w": "image/barberia-isma-480.webp",
        "640w": "image/barberia-isma.webp"
      },
      imgSrc: "image/barberia-isma.webp",
      imgAlt: "Tour 360 de La Barber\xEDa de Isma",
      title: "La Barber\xEDa de Isma",
      tags: "Tour Virtual 360\xB0 y SEO Local",
      description: "Optimizaci\xF3n de ficha Google Business y creaci\xF3n de un tour virtual para aumentar la visibilidad y atraer nuevos clientes en Fuente el Saz.",
      type: "modal",
      modalId: "card-proyecto-barberia",
      tourType: "360\xB0 Tour"
    },
    {
      id: "kuula",
      category: "tour",
      imgSrcSet: {
        "480w": "image/piso-en-venta-480.webp",
        "640w": "image/piso-en-venta.webp"
      },
      imgSrc: "image/piso-en-venta.webp",
      imgAlt: "Tour 360 de un piso en Madrid",
      title: "Piso en alquiler - tour virtual",
      tags: "Tour Virtual 360\xB0",
      description: "Recorrido virtual completo para inmobiliaria, permitiendo visitas inmersivas 24/7 y acelerando el proceso de alquiler.",
      type: "modal",
      modalId: "card-proyecto-kuula",
      tourType: "360\xB0 Tour"
    },
    {
      id: "suavebocado",
      category: "web seo",
      url: "https://suavebocado.com/",
      imgSrcSet: {
        "480w": "./image/foto-suave-bocado-480.webp",
        "800w": "./image/foto-suave-bocado-800.webp",
        "1423w": "./image/foto-suave-bocado.webp"
      },
      imgSrc: "./image/foto-suave-bocado.webp",
      imgAlt: "P\xE1gina web de Suave Bocado Reposter\xEDa",
      title: "Suave Bocado Reposter\xEDa",
      tags: "WordPress y SEO Local",
      description: "Landing page para reposter\xEDa en Envigado, Colombia. Incluy\xF3 estrategia de SEO local que la posicion\xF3 en el top 2 de Google.",
      type: "link"
    },
    {
      id: "luis-alberto",
      category: "web seo",
      url: "https://luisalbertocorrea.es/",
      imgSrcSet: {
        "480w": "image/foto-luis-alberto-correa-480.webp",
        "800w": "image/foto-luis-alberto-correa-800.webp",
        "1422w": "image/foto-luis-alberto-correa.webp"
      },
      imgSrc: "image/foto-luis-alberto-correa.webp",
      imgAlt: "Landing page del m\xFAsico Luis Alberto Correa",
      title: "Luis Alberto Correa - M\xFAsico",
      tags: "WordPress y SEO Local",
      description: "Landing page para m\xFAsico en Palma de Mallorca. Dise\xF1o web en WordPress y estrategia de SEO local para aumentar su visibilidad en la isla.",
      type: "link"
    },
    {
      id: "mrtijeras",
      category: "web seo",
      url: "https://mrtijeras.com/",
      imgSrcSet: {
        "480w": "image/foto-barberia-mrtijeras-480.webp",
        "800w": "image/foto-barberia-mrtijeras-800.webp",
        "1440w": "image/foto-barberia-mrtijeras.webp"
      },
      imgSrc: "image/foto-barberia-mrtijeras.webp",
      imgAlt: "Landing page de la barber\xEDa Mr. Tijeras",
      title: "Barber\xEDa Mr. Tijeras",
      tags: "Landing Page y SEO B\xE1sico",
      description: "Creaci\xF3n de landing page y estrategia de SEO b\xE1sico para una barber\xEDa en Madrid, aumentando su visibilidad y citas online.",
      type: "link"
    }
  ];

  // src/js/portfolioRenderer.js
  function createSrcSet(srcset) {
    if (!srcset) return "";
    return Object.entries(srcset).map(([size, url]) => `${url} ${size}`).join(", ");
  }
  function createPortfolioCard(item) {
    const isLink = item.type === "link";
    const tag = isLink ? "a" : "div";
    const hrefAttr = isLink ? `href="${item.url}" target="_blank" rel="noopener noreferrer"` : "";
    const cursorClass = isLink ? "cursor-pointer" : "cursor-pointer";
    const idAttr = item.type === "modal" ? `id="${item.modalId}"` : "";
    const srcsetAttr = item.imgSrcSet ? `srcset="${createSrcSet(item.imgSrcSet)}"` : "";
    const sizesAttr = item.imgSrcSet ? `sizes="(max-width: 640px) 480px, (max-width: 1024px) 800px, 1440px"` : "";
    return `
    <${tag} ${idAttr} class="portfolio-item group scroll-animate-initial ${cursorClass}" data-category="${item.category}" ${hrefAttr}>
      <div class="relative">
        <img
          class="w-full h-56 object-cover group-hover:scale-105 transition-transform duration-500 ease-in-out"
          ${srcsetAttr}
          ${sizesAttr}
          src="${item.imgSrc}"
          alt="${item.imgAlt}"
          loading="lazy"
          decoding="async"
        />
        ${item.type === "link" ? `
          <div class="absolute top-2 right-2 p-2 bg-black/50 rounded-full text-white opacity-0 group-hover:opacity-100 transition-opacity duration-300" aria-hidden="true">
            <i class="fas fa-link"></i>
          </div>
        ` : ""}
        ${item.tourType ? `
          <div class="absolute top-2 right-2 flex items-center space-x-1.5 rounded-full bg-black/50 px-3 py-1 text-xs font-semibold text-white backdrop-blur-sm">
            <i class="fas fa-vr-cardboard"></i>
            <span>${item.tourType}</span>
          </div>
        ` : ""}
      </div>
      <div class="p-6">
        <div class="flex items-center gap-2 mb-2">
          <h3 class="text-xl font-semibold text-gray-900 dark:text-white">${item.title}</h3>
          ${item.isNew ? `
            <span class="bg-primary-blue dark:bg-primary-green text-white text-xs font-bold uppercase py-1 px-2 rounded-full">
              Nuevo
            </span>
          ` : ""}
        </div>
        <p class="text-sm text-primary-blue dark:text-primary-green mb-2">${item.tags}</p>
        <p class="text-gray-600 dark:text-gray-400 text-base">${item.description}</p>
      </div>
    </${tag}>
  `;
  }
  function renderPortfolioCards(containerId, limit = null) {
    const container = document.getElementById(containerId);
    if (!container) return;
    const itemsToRender = limit ? portfolioData.slice(0, limit) : portfolioData;
    const cardsHtml = itemsToRender.map(createPortfolioCard).join("");
    container.innerHTML = cardsHtml;
    const newCards = container.querySelectorAll(".scroll-animate-initial");
    observeAnimatedElements(newCards);
  }

  // src/js/data/testimonials.js
  var testimonialsData = [
    {
      reviewUrl: "https://www.google.com/search?q=Nelson+Londo%C3%B1o+Agencia&stick=H4sIAAAAAAAA_-NgU1I1qLBINjczNk-2sDA1NEg1SzS2MqgwMjI0SjU3SUo1N01NTDIxXsQq7peaU5yfp-CTn5eSf3hjvoJjempecmYiABacRYxDAAAA&hl=es-419&mat=CYq8wdlAKeDAElYBYJahaebtY79hgszIXmN9x-LjjUAkK5Yano7rVbE2hNRNQQZJJXy3Y6uJnd75CPNnNplduE4XCTP3gujhcfEojKLWSWUMb1WK4bHjA7M0au9UIlHRAw&authuser=0#mpd=~13898153808573349002/customers/reviews?p%3DCg51cGRhdGV0aW1lZGVzYxIDYWxs",
      text: "Excelente experiencia, Nelson Londo\xF1o , muy profesional , estoy muy agradecido por sus servicios, asesor\xEDa y su amabilidad , 100 % recomendado",
      author: "Jose Narvaez",
      service: "Asesor\xEDa y Desarrollo Web",
      stars: 5
    },
    {
      reviewUrl: "https://www.google.com/search?q=Nelson+Londo%C3%B1o+Agencia&stick=H4sIAAAAAAAA_-NgU1I1qLBINjczNk-2sDA1NEg1SzS2MqgwMjI0SjU3SUo1N01NTDIxXsQq7peaU5yfp-CTn5eSf3hjvoJjempecmYiABacRYxDAAAA&hl=es-419&mat=CYq8wdlAKeDAElYBYJahaebtY79hgszIXmN9x-LjjUAkK5Yano7rVbE2hNRNQQZJJXy3Y6uJnd75CPNnNplduE4XCTP3gujhcfEojKLWSWUMb1WK4bHjA7M0au9UIlHRAw&authuser=0#mpd=~13898153808573349002/customers/reviews?p%3DCg51cGRhdGV0aW1lZGVzYxIDYWxs",
      text: "Muy complacido del trabajo realizado por ustedes de mi p\xE1gina web, gracias infinitas, excelente trabajo.",
      author: "Luis Alberto Correa Marin",
      service: "P\xE1gina Web para M\xFAsico",
      stars: 5
    },
    {
      reviewUrl: "https://www.google.com/search?q=Nelson+Londo%C3%B1o+Agencia&stick=H4sIAAAAAAAA_-NgU1I1qLBINjczNk-2sDA1NEg1SzS2MqgwMjI0SjU3SUo1N01NTDIxXsQq7peaU5yfp-CTn5eSf3hjvoJjempecmYiABacRYxDAAAA&hl=es-419&mat=CYq8wdlAKeDAElYBYJahaebtY79hgszIXmN9x-LjjUAkK5Yano7rVbE2hNRNQQZJJXy3Y6uJnd75CPNnNplduE4XCTP3gujhcfEojKLWSWUMb1WK4bHjA7M0au9UIlHRAw&authuser=0#mpd=~13898153808573349002/customers/reviews?p%3DCg51cGRhdGV0aW1lZGVzYxIDYWxs",
      text: "Nelson es un desarrollador web altamente capacitado y comprometido. Su capacidad para resolver problemas t\xE9cnicos de manera eficiente y su proactividad para proponer soluciones innovadoras fueron muy valiosas. Recomiendo a Nelson ya que es una persona talentosa y confiable.",
      author: "Aleja Villa",
      service: "Desarrollo Web",
      stars: 5
    }
  ];

  // src/js/testimonialRenderer.js
  function createStarRating(rating) {
    let stars = "";
    for (let i = 0; i < 5; i++) {
      stars += `<i class="fas fa-star ${i < rating ? "text-yellow-400" : "text-gray-300"}"></i>`;
    }
    return `<div class="testimonial-stars mb-2">${stars}</div>`;
  }
  function createTestimonialCard(testimonial) {
    return `
    <a
      href="${testimonial.reviewUrl}"
      target="_blank"
      rel="noopener noreferrer"
      aria-label="Ver rese\xF1a en Google"
      class="testimonial-card scroll-animate-initial block group transition-transform duration-300 ease-in-out hover:-translate-y-2"
    >
      <div class="flex justify-between items-start">
        <i class="fas fa-quote-left text-5xl text-primary-green/20 dark:text-primary-blue/20"></i>
        <div class="w-7 h-7">
          <svg viewBox="0 0 24 24" class="w-full h-full">
            <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"></path>
            <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"></path>
            <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z" fill="#FBBC05"></path>
            <path d="M12 5.16c1.56 0 2.95.55 4.06 1.6l3.16-3.16C17.45 1.99 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"></path>
            <path d="M1 1h22v22H1z" fill="none"></path>
          </svg>
        </div>
      </div>
      <p class="my-4 text-base md:text-lg leading-relaxed text-gray-600 dark:text-gray-300 flex-grow">
        ${testimonial.text}
      </p>
      <div class="mt-auto">
        ${createStarRating(testimonial.stars)}
        <p class="font-semibold text-gray-800 dark:text-white">${testimonial.author}</p>
        <p class="text-sm text-gray-500">${testimonial.service}</p>
      </div>
    </a>
  `;
  }
  function initTestimonialCards() {
    const container = document.getElementById("testimonials-container");
    if (!container) return;
    const cardsHtml = testimonialsData.map(createTestimonialCard).join("");
    container.innerHTML = cardsHtml;
    const newCards = container.querySelectorAll(".scroll-animate-initial");
    observeAnimatedElements(newCards);
  }

  // src/js/script.js
  document.addEventListener("DOMContentLoaded", async () => {
    await loadComponents();
    initDarkMode();
    initSmoothScroll();
    initScrollAnimations();
    initNav();
    initNumberAnimation();
    initServiceCards();
    if (document.getElementById("portfolio-grid")) {
      renderPortfolioCards("portfolio-grid", 3);
    }
    if (document.getElementById("portfolio-grid-proyectos")) {
      renderPortfolioCards("portfolio-grid-proyectos");
    }
    initPortfolioFilter();
    initTestimonialCards();
    initFooter();
    initChatbot();
    initModals();
    function initModals() {
      function openModal(modal) {
        if (modal) {
          const iframe = modal.querySelector("iframe[data-src]");
          if (iframe && !iframe.src) {
            iframe.src = iframe.dataset.src;
          }
          modal.classList.remove("hidden");
          modal.classList.add("flex");
          document.body.classList.add("overflow-hidden");
        }
      }
      function closeModal(modal) {
        if (modal) {
          modal.classList.add("hidden");
          modal.classList.remove("flex");
          document.body.classList.remove("overflow-hidden");
        }
      }
      const modalConfigs = [
        { cardId: "card-proyecto-locutorio", modalId: "proyecto-modal-locutorio" },
        { cardId: "card-proyecto-barberia", modalId: "proyecto-modal-barberia" },
        { cardId: "card-proyecto-kuula", modalId: "proyecto-modal-kuula" }
      ];
      modalConfigs.forEach((config) => {
        const card = document.getElementById(config.cardId);
        const modal = document.getElementById(config.modalId);
        if (card && modal) {
          card.addEventListener("click", () => openModal(modal));
        }
      });
      const allModals = document.querySelectorAll(
        '[id^="service-modal-"], [id^="proyecto-modal-"]'
      );
      if (allModals.length > 0) {
        allModals.forEach((modal) => {
          const closeModalBtn = modal.querySelector('button[id^="close-modal-"]');
          if (closeModalBtn) {
            closeModalBtn.addEventListener("click", () => closeModal(modal));
          }
          modal.addEventListener("click", (event) => {
            if (event.target === modal) {
              closeModal(modal);
            }
          });
          modal.querySelectorAll(".modal-contact-button").forEach((button) => {
            button.addEventListener("click", () => closeModal(modal));
          });
        });
        window.addEventListener("keydown", (event) => {
          if (event.key === "Escape") {
            allModals.forEach((modal) => {
              if (!modal.classList.contains("hidden")) {
                closeModal(modal);
              }
            });
          }
        });
      }
    }
    initContactForm();
    function initContactForm() {
      const contactForm = document.querySelector("#contact-form");
      if (contactForm) {
        const statusMessage = document.getElementById("form-status");
        const submitButton = contactForm.querySelector('button[type="submit"]');
        contactForm.addEventListener("submit", async function(e) {
          e.preventDefault();
          if (!contactForm.checkValidity()) {
            contactForm.reportValidity();
            if (statusMessage) {
              statusMessage.textContent = "Por favor, completa todos los campos requeridos.";
              statusMessage.className = "text-center font-semibold mt-4 text-red-600";
              setTimeout(() => {
                statusMessage.textContent = "";
              }, 5e3);
            }
            return;
          }
          const formData = new FormData(contactForm);
          if (statusMessage) {
            statusMessage.textContent = "Enviando...";
            statusMessage.className = "text-center font-semibold mt-4 text-gray-600 dark:text-gray-300";
          }
          if (submitButton) {
            submitButton.disabled = true;
          }
          try {
            const response = await fetch(contactForm.action, {
              method: "POST",
              body: formData,
              headers: { Accept: "application/json" }
            });
            if (response.ok) {
              if (statusMessage) {
                statusMessage.textContent = "\xA1Mensaje enviado con \xE9xito!";
                statusMessage.className = "text-center font-semibold mt-4 text-green-600";
                setTimeout(() => {
                  statusMessage.textContent = "";
                }, 5e3);
              }
              contactForm.reset();
            } else {
              if (statusMessage) {
                statusMessage.textContent = "Hubo un error al enviar el mensaje. Int\xE9ntalo de nuevo.";
                statusMessage.className = "text-center font-semibold mt-4 text-red-600";
                setTimeout(() => {
                  statusMessage.textContent = "";
                }, 5e3);
              }
            }
          } catch (error) {
            if (statusMessage) {
              statusMessage.textContent = "Hubo un problema de conexi\xF3n. Revisa tu internet.";
              statusMessage.className = "text-center font-semibold mt-4 text-red-600";
              setTimeout(() => {
                statusMessage.textContent = "";
              }, 5e3);
            }
          } finally {
            if (submitButton) {
              setTimeout(() => {
                submitButton.disabled = false;
              }, 3e3);
            }
          }
        });
      }
    }
    initContactReveal();
    function initContactReveal() {
      const contactContainer = document.getElementById("contact-reveal-container");
      if (contactContainer) {
        const revealEmailBtn = document.getElementById("reveal-email-btn");
        const revealPhoneBtn = document.getElementById("reveal-phone-btn");
        if (revealEmailBtn) {
          revealEmailBtn.addEventListener(
            "click",
            (e) => {
              e.currentTarget.outerHTML = `
          <a href="mailto:contacto@nelsonlondono.es" class="text-primary-blue dark:text-primary-green font-semibold hover:underline flex items-center">
            <i class="fas fa-envelope mr-2"></i>contacto@nelsonlondono.es
          </a>`;
            },
            { once: true }
          );
        }
        if (revealPhoneBtn) {
          revealPhoneBtn.addEventListener(
            "click",
            (e) => {
              e.currentTarget.outerHTML = `
          <a href="tel:+34663975428" class="text-primary-blue dark:text-primary-green font-semibold hover:underline flex items-center">
            <i class="fas fa-phone mr-2"></i>+34 663 97 54 28
          </a>`;
            },
            { once: true }
          );
        }
      }
    }
    initCookieConsent();
    function initCookieConsent() {
      const COOKIE_CONSENT_KEY = "nelson_cookie_consent";
      const cookieBanner = document.getElementById("cookie-banner");
      const cookieModal = document.getElementById("cookie-settings-modal");
      const analyticsToggle = document.getElementById("analytics-cookie-toggle");
      const openCookieSettingsBtn = document.getElementById("open-cookie-settings");
      const acceptBtn = document.getElementById("cookie-accept");
      const rejectBtn = document.getElementById("cookie-reject");
      const settingsBtn = document.getElementById("cookie-settings-open");
      const saveSettingsBtn = document.getElementById("cookie-settings-save");
      function getConsent() {
        const consent = localStorage.getItem(COOKIE_CONSENT_KEY);
        return consent ? JSON.parse(consent) : null;
      }
      function setConsent(consent) {
        localStorage.setItem(COOKIE_CONSENT_KEY, JSON.stringify(consent));
      }
      function enableGoogleAnalytics() {
        if (typeof gtag === "function") {
          gtag("config", "G-124QEKRXHD");
        }
      }
      function handleInitialConsent() {
        const consent = getConsent();
        if (consent) {
          if (consent.analytics) {
            enableGoogleAnalytics();
          }
          if (cookieBanner) {
            cookieBanner.classList.add("hidden");
          }
        } else {
          if (cookieBanner) {
            cookieBanner.classList.remove("hidden");
          }
        }
      }
      if (openCookieSettingsBtn) {
        openCookieSettingsBtn.addEventListener("click", (e) => {
          e.preventDefault();
          const consent = getConsent() || { analytics: false };
          if (analyticsToggle) {
            analyticsToggle.checked = consent.analytics;
          }
          if (cookieModal) {
            cookieModal.classList.remove("hidden");
          }
        });
      }
      if (acceptBtn) {
        acceptBtn.addEventListener("click", () => {
          const consent = { necessary: true, analytics: true };
          setConsent(consent);
          enableGoogleAnalytics();
          if (cookieBanner) {
            cookieBanner.classList.add("hidden");
          }
        });
      }
      if (rejectBtn) {
        rejectBtn.addEventListener("click", () => {
          const consent = { necessary: true, analytics: false };
          setConsent(consent);
          if (cookieBanner) {
            cookieBanner.classList.add("hidden");
          }
        });
      }
      if (settingsBtn) {
        settingsBtn.addEventListener("click", () => {
          const consent = getConsent() || { analytics: false };
          if (analyticsToggle) {
            analyticsToggle.checked = consent.analytics;
          }
          if (cookieModal) {
            cookieModal.classList.remove("hidden");
          }
        });
      }
      if (saveSettingsBtn) {
        saveSettingsBtn.addEventListener("click", () => {
          const consent = {
            necessary: true,
            analytics: analyticsToggle ? analyticsToggle.checked : false
          };
          setConsent(consent);
          if (consent.analytics) {
            enableGoogleAnalytics();
          }
          if (cookieModal) {
            cookieModal.classList.add("hidden");
          }
          if (cookieBanner) {
            cookieBanner.classList.add("hidden");
          }
        });
      }
      if (cookieModal) {
        cookieModal.addEventListener("click", (e) => {
          if (e.target === cookieModal) {
            cookieModal.classList.add("hidden");
          }
        });
      }
      handleInitialConsent();
    }
    initHeroIframe();
    function initHeroIframe() {
      const heroIframeContainer = document.getElementById("hero-iframe-container");
      if (heroIframeContainer) {
        heroIframeContainer.addEventListener(
          "click",
          () => {
            const placeholder = document.getElementById("hero-iframe-placeholder");
            const iframe = document.getElementById("hero-iframe");
            if (iframe && iframe.dataset.src) {
              iframe.src = iframe.dataset.src;
              if (placeholder) {
                placeholder.classList.add("hidden");
              }
              iframe.classList.remove("hidden");
              heroIframeContainer.style.cursor = "default";
            }
          },
          { once: true }
        );
      }
    }
    function setupSocialSharing() {
      const shareLinkedin = document.getElementById("share-linkedin");
      const shareWhatsapp = document.getElementById("share-whatsapp");
      if (shareLinkedin && shareWhatsapp) {
        const shareUrl = window.location.href;
        const shareTitle = document.title;
        const shareText = document.querySelector('meta[name="description"]').getAttribute("content");
        if (shareUrl && shareTitle && shareText) {
          shareLinkedin.href = `https://www.linkedin.com/shareArticle?mini=true&url=${encodeURIComponent(
            shareUrl
          )}&title=${encodeURIComponent(shareTitle)}&summary=${encodeURIComponent(
            shareText
          )}`;
          shareLinkedin.target = "_blank";
          shareLinkedin.rel = "noopener noreferrer";
          shareWhatsapp.href = `https://api.whatsapp.com/send?text=${encodeURIComponent(
            shareTitle + " - Link: " + shareUrl
          )}`;
          shareWhatsapp.target = "_blank";
          shareWhatsapp.rel = "noopener noreferrer";
        }
      }
    }
    setupSocialSharing();
  });
})();
